sources:
  file_source:
    type: file
    include:
      - "/home/gperreymond/Workspace/github/gperreymond/vector-etl/log/**/*.csv"
  http_source:
    type: http
    host: 0.0.0.0
    port: 9876
    auth:
      username: admin01
      password: changeme

transforms:
  remap_file_transform:
    type: script
    inputs:
      - file_source
    source: "
    const [timestamp, tagPath, value] = data.message.split(',')
    data.timestamp = timestamp
    data.tagPath = tagPath
    data.value = value
    delete data.message
    delete data.file
    "

sinks:
  console_sink:
    type: console
    inputs:
      - http_source
      - remap_file_transform
